

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>ROS and Gazebo &mdash; eYRC-VB#1202 Task 5 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MoveIt! and RViz" href="Moveit.html" />
    <link rel="prev" title="Overview" href="Introduction.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> eYRC-VB#1202 Task 5
          

          
            
            <img src="../../_static/eyrc.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Vargi Bot Theme</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Introduction/Theme Arena.html">Theme Arena</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Introduction/Theme Arena.html#ur5-robotic-arms">UR5 Robotic Arms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Introduction/Theme Arena.html#logical-camera">Logical Camera</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Introduction/Theme Arena.html#camera">Camera</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Introduction/Theme Arena.html#shelf-and-conveyor-belt">Shelf and Conveyor Belt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Introduction/Theme Arena.html#sorting-bins-and-packages">Sorting Bins and Packages</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Implementation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Introduction.html#simulation">Simulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Introduction.html#ros-and-gazebo">ROS and Gazebo</a></li>
<li class="toctree-l3"><a class="reference internal" href="Introduction.html#moveit-and-rviz">MoveIt! and RViz</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Introduction.html#iot-communication">IoT Communication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Introduction.html#mqtt-protocol">MQTT Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="Introduction.html#gsuite-sheets-and-email">Gsuite (Sheets and Email)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Introduction.html#dashboard">Dashboard</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ROS and Gazebo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ros">ROS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gazebo">Gazebo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#logical-camera">Logical Camera</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vacuum-gripper">Vacuum Gripper</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Moveit.html">MoveIt! and RViz</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Moveit.html#moveit">MoveIt!</a></li>
<li class="toctree-l2"><a class="reference internal" href="Moveit.html#rviz">RViz</a><ul>
<li class="toctree-l3"><a class="reference internal" href="Moveit.html#scene-files">Scene Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="Moveit.html#tf-frames">TF Frames</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="MQTT.html">MQTT Protocol</a><ul>
<li class="toctree-l2"><a class="reference internal" href="MQTT.html#mqtt-publisher">MQTT Publisher</a></li>
<li class="toctree-l2"><a class="reference internal" href="MQTT.html#mqtt-topics">MQTT Topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="MQTT.html#mqtt-broker">MQTT Broker</a></li>
<li class="toctree-l2"><a class="reference internal" href="MQTT.html#mqtt-subscriber">MQTT Subscriber</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Google.html">GSuite, Sheets and Gmail</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Google.html#google-sheets">Google Sheets</a></li>
<li class="toctree-l2"><a class="reference internal" href="Google.html#gmail-integration">Gmail Integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Dashboard.html">Dashboard</a></li>
</ul>
<p class="caption"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../API Doc/API Doc.html">Documentation Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../API Doc/API Doc.html#pkg-task5">pkg_task5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/API Doc.html#config">config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/API Doc.html#launch">launch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/API Doc.html#scripts">scripts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API Doc/API Doc.html#pkg-ros-iot-bridge">pkg_ros_iot_bridge</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/API Doc.html#id1">config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/API Doc.html#msg">msg</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/API Doc.html#id2">scripts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../API Doc/pkg_task5/pkg_task5.html">pkg_task5</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../API Doc/pkg_task5/pkg_task5.html#config">config</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/pkg_task5/config/rviz.html">rviz</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/pkg_task5/config/saved_trajectories.html">saved_trajectories</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API Doc/pkg_task5/pkg_task5.html#launch">launch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/pkg_task5/launch/task5_solution.html">task5_solution.launch</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API Doc/pkg_task5/pkg_task5.html#scripts">scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/pkg_task5/scripts/lib_task5.html">lib_task5.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/pkg_task5/scripts/node_t5_ur5_1.html">node_t5_ur5_1.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/pkg_task5/scripts/node_t5_ur5_2.html">node_t5_ur5_2.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/pkg_task5/scripts/node_package_detect.html">node_package_detect.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/pkg_task5/scripts/node_iot_action_client.html">node_iot_action_client.py</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../API Doc/pkg_ros_iot_bridge/pkg_ros_iot_bridge.html">pkg_ros_iot_bridge</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../API Doc/pkg_ros_iot_bridge/pkg_ros_iot_bridge.html#config">config</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/pkg_ros_iot_bridge/config/config_pyiot.html">config_pyiot.yaml</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API Doc/pkg_ros_iot_bridge/pkg_ros_iot_bridge.html#msg">msg</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/pkg_ros_iot_bridge/msg/msgMqttSub.html">msgMqttSub.msg</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../API Doc/pkg_ros_iot_bridge/pkg_ros_iot_bridge.html#scripts">scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../API Doc/pkg_ros_iot_bridge/scripts/node_action_server_ros_iot_bridge.html">node_action_server_ros_iot_bridge.py</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">eYRC-VB#1202 Task 5</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>ROS and Gazebo</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/directory/Implementation/ROS Gazebo.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ros-and-gazebo">
<h1>ROS and Gazebo<a class="headerlink" href="#ros-and-gazebo" title="Permalink to this headline">¶</a></h1>
<p>The ROS + Gazebo setup is the core of this implementation, controlling the majority of code execution during the course of performing the task.</p>
<hr class="docutils" />
<div class="section" id="ros">
<h2>ROS<a class="headerlink" href="#ros" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center" id="id1">
<img alt="../../_images/ROS Terminal.png" src="../../_images/ROS Terminal.png" />
<p class="caption"><span class="caption-text">The ROS nodes for the arms in action inside the terminal.</span></p>
</div>
<p>Robot Operating System (ROS) is a middleware that interconnects many different sensors, robots, etc. as nodes in a control network, and helps maintain communication pipelines and control between the nodes, thus providing a robust modeling and control system for robotics applications.</p>
<p>Through encapsulated modular packages, each containing one or multiple nodes that are run through Python scripts that are collectively executed through launch files in each package, nodes can access configuration files containing formats to send signals to other nodes under, or preloaded data to access during execution, etc. The entire hierarchy and mapping of the ROS system implemented in this task can be summarised thus:</p>
<div class="figure align-center" id="id2">
<img alt="../../_images/rosgraph.png" src="../../_images/rosgraph.png" />
<p class="caption"><span class="caption-text">The <a class="reference external" href="http://wiki.ros.org/rqt_graph">rqt_graph</a> containing a mapping of all the ROS nodes used in the implementation.</span></p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="gazebo">
<h2>Gazebo<a class="headerlink" href="#gazebo" title="Permalink to this headline">¶</a></h2>
<div class="figure align-center" id="id3">
<img alt="../../_images/GazeboSim.png" src="../../_images/GazeboSim.png" />
<p class="caption"><span class="caption-text">The Gazebo environment provided for the task.</span></p>
</div>
<p>Gazebo is the primary simulation environment for ROS applications that integrates neatly with the other mainstream systems like MoveIt! and RViz, both essential resources for this implementation. The environment for this task was already provided.</p>
<div class="section" id="logical-camera">
<span id="logicalcamera"></span><h3>Logical Camera<a class="headerlink" href="#logical-camera" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center" id="id4">
<img alt="../../_images/LogicalCamera.png" src="../../_images/LogicalCamera.png" />
<p class="caption"><span class="caption-text">The logical camera on the conveyor near the UR5_2.</span></p>
</div>
<p>The logical camera is a simulation concept that mimics a collision-detecting setup of <a class="reference external" href="https://medium.com/androiddevelopers/getting-the-most-from-the-new-multi-camera-api-5155fb3d77d9">multiple cameras</a> in the real world. While a camera outputs an image (or <code class="docutils literal notranslate"><span class="pre">&lt;visual&gt;</span></code> geometry). a logical camera outputs <code class="docutils literal notranslate"><span class="pre">&lt;collision&gt;</span></code>, by checking whether the frustrum of the FOV (Field Of View) projected by the camera <a class="reference external" href="http://gazebosim.org/tutorials?tut=logical_camera_sensor&amp;cat=sensors#DataExplanation">intersects the axis</a> of the model being detected. The output of the logical camera can then be used to detect the <a class="reference internal" href="Moveit.html#tfframe"><span class="std std-ref">frame of the object in RViz</span></a> for the UR5 to travel towards to execute the pick operation.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">An example output by the logical camera.</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span>models:
-
  type: &quot;packagen1&quot;
  pose:
    position:
      x: 1.00500025103
      y: 3.69889668792e-11
      z: 3.69157426527e-06
    orientation:
      x: -0.707108079852
      y: -1.54975566534e-10
      z: -1.54852058667e-10
      w: 0.707105482519
</pre></div>
</div>
</div>
</div>
<div class="section" id="vacuum-gripper">
<h3>Vacuum Gripper<a class="headerlink" href="#vacuum-gripper" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center" id="id6">
<img alt="../../_images/Gripper.png" src="../../_images/Gripper.png" />
<p class="caption"><span class="caption-text">The vocuum gripper with the embedded logical camera.</span></p>
</div>
<p>The vacuum gripper on the UR5s provided for the task have their own logical camera embedded inside, that will allow the gripper to be activated only if a package is within range of the gripper; i.e, nothing other than a designated package can be picked up by the gripper.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Moveit.html" class="btn btn-neutral float-right" title="MoveIt! and RViz" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="Introduction.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Neehal Sharrma (Leader), Leander D&#39;Souza, Hiren Gupta, Arjun Hariharan.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>

  
  
    
   

</body>
</html>